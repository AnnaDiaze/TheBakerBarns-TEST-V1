<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/header1.ejs') %>
  <title>Admin Panel</title>
  <style>
    /* Small, local styles just for this page */
    .admin-actionbar { padding:12px 16px; margin-top:24px; display:flex; gap:8px; flex-wrap:wrap; }
    .dash { max-width:1200px; margin: 16px auto 32px; padding: 0 10px; }
    .welcome {
      background:#ffe4e1; border:1px solid #f6c2cb; color:#8a3d3d;
      border-radius:12px; padding:18px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,.05);
      margin-bottom:16px;
    }
    .stat-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; margin-bottom:16px; }
    .stat { background:#fff; border:1px solid #eee; border-radius:12px; padding:16px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,.05); }
    .stat h4 { margin:0 0 6px; font-size:14px; color:#777; }
    .stat .num { font-size:28px; font-weight:800; color:#b35414; line-height:1; }
    .stat small { display:block; margin-top:6px; color:#888; }
    .tiles { display:grid; grid-template-columns: repeat(4, 1fr); gap:16px; }
    .tile { background:#fff; border:1px solid #eee; border-radius:12px; padding:14px; box-shadow:0 4px 10px rgba(0,0,0,.05);}
    .tile h5 { margin:0 0 8px; font-size:16px; color:#333; display:flex; align-items:center; gap:8px; }
    .tile p { margin:0 0 12px; color:#666; font-size:14px; min-height:44px; }
    .kpi { margin-top:22px; background:#fff; border:1px solid #eee; border-radius:12px; padding:14px; box-shadow:0 4px 10px rgba(0,0,0,.05); }
    .kpi h3 { margin:0 0 8px; font-size:16px; }
    @media (max-width: 1040px){ .tiles{ grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 720px){ .stat-grid{ grid-template-columns: 1fr; } .tiles{ grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <header>
    <h1>The Baker Barns Bakery</h1>
    <%- include('partials/navbar1.ejs') %>
  </header>

  <!-- Admin nav -->
  <nav class="cart-container cart-container--wide admin-actionbar">
    <a class="btn btn-accent"  href="/adminOnly">Admin Panel</a>
    <a class="btn btn-primary" href="/admin/Orders">Manage Orders</a>
    <a class="btn btn-primary" href="/admin/Products">Manage Products</a>
    <a class="btn btn-primary" href="/admin/Recipes">Manage Recipes</a>
    <a class="btn btn-primary" href="/admin/Messages">Manage Messages</a>
    <a class="btn btn-primary" href="/admin/Users">Manage Users</a>
  </nav>

  <main class="dash">
    <!-- Welcome / CTA -->
    <section class="welcome">
      <h2 style="margin:0;">Welcome, <%= username %>!</h2>
      <p style="margin:.35rem 0 1rem;">Here‚Äôs a quick snapshot of your bakery and this month‚Äôs sales.</p>
      <a href="/admin/Orders" class="btn btn-primary btn-sm">View Orders</a>
    </section>

    <!-- Top stats -->
    <section class="stat-grid">
      <div class="stat">
        <h4>Orders</h4>
        <div class="num"><%= ordersTotal %></div>
        <small>Pending: <%= ordersPending %> ¬∑ Completed: <%= ordersCompleted %></small>
      </div>

      <div class="stat">
        <h4>Products</h4>
        <div class="num"><%= productsActive %></div>
        <small>Archived: <%= productsArchived %> ¬∑ Low stock: <%= productsLowStock %></small>
      </div>

      <div class="stat">
        <h4>Users</h4>
        <div class="num"><%= usersTotal %></div>
        <small>Active: <%= usersActive %> ¬∑ Blocked: <%= usersBlocked %></small>
      </div>
    </section>

    <!-- Quick tiles -->
    <section class="tiles">
      <article class="tile">
        <h5>üßæ Manage Orders</h5>
        <p>Review new orders, update statuses, and view item details for pickup.</p>
        <a href="/admin/Orders" class="btn btn-primary btn-sm">Open Orders</a>
      </article>

      <article class="tile">
        <h5>üßÅ Manage Products</h5>
        <p>Add new items, edit descriptions/prices/stock, or archive/restore products.</p>
        <a href="/admin/Products" class="btn btn-primary btn-sm">Open Products</a>
      </article>

      <article class="tile">
        <h5>üìã Manage Recipes</h5>
        <p>Maintain recipe content (titles, ingredients, methods, and images).</p>
        <a href="/admin/Recipes" class="btn btn-primary btn-sm">Open Recipes</a>
      </article>

      <article class="tile">
        <h5>üë§ Manage Users</h5>
        <p>Update roles, block/unblock users, or remove accounts.</p>
        <a href="/admin/Users" class="btn btn-primary btn-sm">Open Users</a>
      </article>
    </section>

    <!-- Month KPI (no chart) -->
    <section class="kpi">
      <h3>This Month‚Äôs Sales (Completed)</h3>
      <div style="font-weight:800; font-size:22px; color:#b35414;">
        <%= monthName %> total: $<%= Number(monthSalesTotal || 0).toFixed(2) %>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 The Baker Barns Bakery</p>
  </footer>
</body>
</html>
