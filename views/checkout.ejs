<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/header1.ejs') %>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <style>
    .checkout-container {
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      background: #fdf6f0;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #8e44ad;
    }
    form label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    form input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .btn-submit {
      background: #27ae60;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      margin-top: 20px;
      cursor: pointer;
      font-size: 1em;
      display: block;
      width: 100%;
    }
  </style>
</head>
<body>
    <header>
        <h1>The Baker Barns Bakery</h1>
        <%- include('partials/navbar1.ejs') %>
    </header>
  <div class="checkout-container">
    <h2>Checkout</h2>
    <form action="/checkout" method="POST">
      <% if (!user) { %>
        <label for="guest_name">Full Name</label>
        <input type="text" name="guest_name" required>

        <label for="guest_email">Email</label>
        <input type="email" name="guest_email" required>

        <label for="guest_phone">Phone</label>
        <input type="text" name="guest_phone" required>
      <% } else { %>
        <p><strong>Customer:</strong> <%= user.name %> (<%= user.email %>)</p>
      <% } %>

      <label for="pickup_date">Pickup Date</label>
      <input type="date" id="pickup_date" name="pickup_date" required 
      min="<%= (() => { 
        let d = new Date(); 
        d.setDate(d.getDate() + 1); 
        return d.toISOString().split('T')[0]; 
        })() %>">

      <button type="submit" class="btn-submit">Place Order</button>
    </form>
  </div>
</body>
</html>